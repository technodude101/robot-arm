{"version":3,"sources":["App.js","index.js"],"names":["App","_this","Object","classCallCheck","this","possibleConstructorReturn","getPrototypeOf","call","center","x","y","fixed","q1","length","thickness","rotation","state","q2","document","querySelector","addEventListener","myHandler","bind","removeEventListener","e","clientX","clientY","moveTo","window","innerHeight","_this$state","Math","cos","PI","sin","react_default","a","createElement","className","type","style","width","min","max","value","onChange","onQ1RangeChange","onQ2RangeChange","defaultChecked","onCenterFixedChange","bottom","left","height","transform","concat","transformOrigin","borderRadius","parseFloat","target","setState","prevState","objectSpread","console","log","arguments","_this2","_ref","clearInterval","inchCloserTimer","normalizedX","normalizedY","h","sqrt","pow","q1Length","q2Length","O","atan2","xDiff","dampenedMovement","abs","centerX","setInterval","q1Rotation","cosARule","q2Rotation","b","c","acos","Component","ReactDOM","render","src_App_0","getElementById"],"mappings":"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","file":"static/js/main.2e365310.chunk.js","sourcesContent":["import React, { Component } from 'react';\nimport './App.css';\n\nclass App extends Component {\n\n  constructor() {\n    super();\n\n    const center = { x: 350, y: 250, fixed: false }\n\n    const q1 = {\n      x: center.x + 35,\n      y: center.y + 35,\n      length: 200,\n      thickness: 30,\n      rotation: 0,\n    }\n\n    const q2 = {\n      x: 0,\n      y: 0,\n      length: 150,\n      thickness: 20,\n      rotation: 0,\n    }\n\n    this.state = {\n      center,\n      q1,\n      q2\n    }\n  }\n\n  componentDidMount() {\n    document.querySelector('body').addEventListener('mousemove', this.myHandler.bind(this));\n  }\n\n  componentWillUnmount() {\n    document.querySelector('body').removeEventListener('mousemove', this.myHandler.bind(this));\n  }\n\n  myHandler(e) {\n    const { clientX, clientY } = e;\n\n    if (clientY < 130 && clientX < 750) { \n      return;\n    }\n\n    this.moveTo({ x: clientX, y: window.innerHeight - clientY });\n  }\n\n  render() {\n    const { q1, q2, center, x, y } = this.state;\n\n    q2.x = q1.x + (q1.length - q1.thickness) * Math.cos(q1.rotation * Math.PI / 180);\n    q2.y = q1.y - (q1.length - q1.thickness) * Math.sin(q1.rotation * Math.PI / 180);\n\n    return (\n      <div className=\"App\">\n        <div className=\"controls\">\n          <h1>coolbeans</h1>\n          <input type=\"range\" style={{ width: 300 }} min={-180} max={180} value={q1.rotation} onChange={this.onQ1RangeChange.bind(this)} />\n          <input type=\"range\" style={{ width: 300 }} min={-180} max={180} value={q2.rotation} onChange={this.onQ2RangeChange.bind(this)} />\n          <input type=\"number\" min={-90} max={0} value={q1.rotation} onChange={this.onQ1RangeChange.bind(this)} />\n          <input type=\"number\" min={-180} max={180} value={q2.rotation} onChange={this.onQ2RangeChange.bind(this)} />\n          {/* <input type=\"checkbox\" checked={center.fixed} onChange={this.onCenterFixedChange.bind(this)} /> */}\n          <label>\n            <input type=\"checkbox\" defaultChecked={this.state.center.fixed} onChange={this.onCenterFixedChange.bind(this)} />\n            {center.fixed ? 'fixed horizontal actuator' : 'not fixed'}\n          </label>\n        </div>\n        <div className=\"cursor\" style={{ bottom: y - 15, left: x - 15 }}></div>\n        <div className=\"base\" style={{ width: 50, height: 50, left: center.x, bottom: center.y }}></div>\n        <div className=\"q1\" style={{\n          width: q1.length,\n          height: q1.thickness,\n          left: q1.x - q1.thickness / 2,\n          bottom: q1.y - q1.thickness / 2,\n          transform: `rotate(${q1.rotation}deg)`,\n          transformOrigin: `${q1.thickness / 2}px center`,\n          borderRadius: `${q1.thickness / 2}px`\n        }}>q1</div>\n        <div className=\"q2\" style={{ width: q2.length,\n          height: q2.thickness,\n          left: q2.x - q2.thickness / 2,\n          bottom: q2.y - q2.thickness / 2,\n          transform: `rotate(${parseFloat(q1.rotation) + parseFloat(q2.rotation)}deg)`,\n          transformOrigin: `${q2.thickness / 2}px center`,\n          borderRadius: `${q2.thickness / 2}px`\n        }}>q2\n          <div className=\"gripper\"></div>\n        </div>\n      </div>\n    );\n  }\n\n  onQ1RangeChange(e) {\n    var rotation = e.target.value;\n    this.setState(prevState => ({\n      q1: { ...prevState.q1, rotation },\n    }));\n  }\n\n  onQ2RangeChange(e) {\n    var rotation = e.target.value;\n    this.setState(prevState => ({\n      q2: { ...prevState.q2, rotation }\n    }));\n  }\n\n  onCenterFixedChange(e) {\n    console.log(arguments);\n    this.setState(prevState => ({\n      center: { ...prevState.center, fixed: ! prevState.center.fixed }\n    }));\n  }\n\n  moveTo({ x, y }) {\n    window.clearInterval(this.inchCloserTimer);\n\n    this.setState(prevState => {\n      const { q1, q2, center } = prevState;\n\n      const normalizedX = x - (center.x + 35);\n      const normalizedY = y - (center.y + 35);\n\n      const h = Math.sqrt(normalizedX**2 + normalizedY**2);\n      const q1Length = q1.length - q1.thickness;\n      const q2Length = q2.length - q2.thickness + 25;\n      const O = Math.atan2(normalizedY, normalizedX) * 180 / Math.PI;\n      const xDiff = x - center.x;\n      const speedCoefficient = 2;\n      const dampenedMovement = Math.log(Math.abs(xDiff)) * speedCoefficient;\n      console.log(xDiff, dampenedMovement);\n      const centerX = center.x + (xDiff > 100 ? dampenedMovement : (xDiff < -100 ? -dampenedMovement : 0)); // center.x + 0.02 * xDiff;\n\n      if (h > (q1Length + q2Length)) {\n        if (center.x !== centerX && ! center.fixed) {\n          this.inchCloserTimer = window.setInterval(this.moveTo.bind(this, { x, y }), 16);\n        }\n\n        return {\n          q1: { ...q1, rotation: -O, x: center.fixed ? q1.x : centerX + 35 },\n          q2: { ...q2, rotation: 0 },\n          center: { ...center, x: center.fixed ? center.x : centerX },\n          x,\n          y,\n        };\n      }\n\n      if (0 === h) {\n        return;\n      }\n\n      const A = this.cosARule(q2Length, q1Length, h);\n      const C = this.cosARule(h, q1Length, q2Length);\n\n      var q1Rotation = - O - A;\n      var q2Rotation = 180 - C;\n\n      return {\n        q1: { ...q1, rotation: q1Rotation },\n        q2: { ...q2, rotation: q2Rotation },\n        x,\n        y,\n      }\n    });\n  }\n\n  cosARule(a, b, c) {\n    return Math.acos((b**2 + c**2 - a**2) / (2 * b * c)) * 180 / Math.PI;\n  }\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\n\nReactDOM.render(<App />, document.getElementById('root'));\n"],"sourceRoot":""}